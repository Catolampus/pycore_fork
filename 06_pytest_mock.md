## pytest

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å pytest –≤–Ω—É—Ç—Ä–∏ Jupiter notebook –≤–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º [ipytest](https://github.com/chmp/ipytest)


```python
# pip install -U ipytest
import ipytest

ipytest.autoconfig()
```


```python
%%ipytest

import ipytest

def test_my_func():
    assert my_func(0) == 0
    assert my_func(1) == 0
    assert my_func(2) == 2
    assert my_func(3) == 2
    
    
def my_func(x):
    return x // 2 * 2 
```

    [32m.[0m[32m                                                                                            [100%][0m
    [32m[32m[1m1 passed[0m[32m in 0.01s[0m[0m
    


```python
%%ipytest

import pytest

@pytest.mark.parametrize('input,expected', [
    (0, 0),
    (1, 0),
    (2, 2),
    (3, 2),
])
def test_parametrized(input, expected):
    assert my_func(input) == expected
    
@pytest.fixture
def my_fixture():
    return 42

def test_fixture(my_fixture):
    assert my_fixture == 42
```

    [32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m                                                                                        [100%][0m
    [32m[32m[1m5 passed[0m[32m in 0.01s[0m[0m
    



## –ú–æ–∫–∏, —Å—Ç–∞–±—ã

–¢–µ—Å—Ç–æ–≤—ã–π –¥–≤–æ–π–Ω–∏–∫ - —Ç–µ—Ä–º–∏–Ω, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π –≤—Å–µ –≤–∏–¥—ã —Ñ–∞–ª—å—à–∏–≤—ã—Ö (fake) –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –Ω–µ–ø—Ä–∏–≥–æ–¥–Ω—ã—Ö –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –∫–æ–Ω–µ—á–Ω–æ–º –ø—Ä–æ–¥—É–∫—Ç–µ (non-production-ready). –¢–∞–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≤—ã–≥–ª—è–¥–∏—Ç –∏ –≤–µ–¥–µ—Ç —Å–µ–±—è –∫–∞–∫ –µ–µ –∞–Ω–∞–ª–æ–≥, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è production, –Ω–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —è–≤–ª—è–µ—Ç—Å—è —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–µ–π, –∫–æ—Ç–æ—Ä–∞—è —Å–Ω–∏–∂–∞–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∏ –æ–±–ª–µ–≥—á–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –±—ã–≤–∞—é—Ç –ø—è—Ç–∏ —Ç–∏–ø–æ–≤, –Ω–æ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –º–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å—Å—è –¥–≤—É–º—è: –º–æ–∫–∏ (mock) –∏ —Å—Ç–∞–±—ã (stub).  
–ú–æ–∫–∏ –ø–æ–º–æ–≥–∞—é—Ç –∏–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –∏–∑—É—á–∞—Ç—å –∏—Å—Ö–æ–¥—è—â–∏–µ (outcoming) –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è. –¢–æ –µ—Å—Ç—å –≤—ã–∑–æ–≤—ã, —Å–æ–≤–µ—Ä—à–∞–µ–º—ã–µ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–π —Å–∏—Å—Ç–µ–º–æ–π (SUT) –∫ –µ–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è.  
–°—Ç–∞–±—ã –ø–æ–º–æ–≥–∞—é—Ç –∏–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Ö–æ–¥—è—â–∏–µ (incoming) –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è. –¢–æ –µ—Å—Ç—å –≤—ã–∑–æ–≤—ã, —Å–æ–≤–µ—Ä—à–∞–µ–º—ã–µ SUT –∫ –µ–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.  

–ü–æ–Ω—è—Ç–∏–µ –º–æ–∫–æ–≤ –∏ —Å—Ç–∞–±–æ–≤ —Å–≤—è–∑–∞–Ω–æ —Å –ø—Ä–∏–Ω—Ü–∏–ø–æ–º command-query separation (CQS). –ü—Ä–∏–Ω—Ü–∏–ø CQS –≥–ª–∞—Å–∏—Ç, —á—Ç–æ –∫–∞–∂–¥—ã–π –º–µ—Ç–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ª–∏–±–æ –∫–æ–º–∞–Ω–¥–æ–π, –ª–∏–±–æ –∑–∞–ø—Ä–æ—Å–æ–º, –Ω–æ –Ω–µ –æ–±–æ–∏–º–∏.  
–ö–æ–º–∞–Ω–¥—ã - —ç—Ç–æ –º–µ—Ç–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–∑—ã–≤–∞—é—Ç –ø–æ–±–æ—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –∏ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –Ω–∏–∫–∞–∫–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è. –ü—Ä–∏–º–µ—Ä—ã –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –≤–∫–ª—é—á–∞—é—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞, –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ –∏ —Ç. –¥.  
–ó–∞–ø—Ä–æ—Å—ã, –Ω–∞–æ–±–æ—Ä–æ—Ç, –Ω–µ –∏–º–µ—é—Ç –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∑–Ω–∞—á–µ–Ω–∏–µ.  
–î—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, –∑–∞–¥–∞–≤–∞—è –≤–æ–ø—Ä–æ—Å, –≤—ã –Ω–µ –¥–æ–ª–∂–Ω—ã –º–µ–Ω—è—Ç—å –æ—Ç–≤–µ—Ç. –ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–∞–∫–æ–µ —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ, —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ª–µ–≥—á–µ –¥–ª—è —á—Ç–µ–Ω–∏—è. –¢–µ—Å—Ç–æ–≤—ã–µ –¥–≤–æ–π–Ω–∏–∫–∏, –∑–∞–º–µ–Ω—è—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã, —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –º–æ–∫–∞–º–∏, –∏, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–≤–æ–π–Ω–∏–∫–∏, –∑–∞–º–µ–Ω—è—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã, —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —Å—Ç–∞–±–∞–º–∏.

## –ù–µ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å–æ —Å—Ç–∞–±–∞–º–∏

–ö–∞–∫ —É–∂–µ —É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å, —Å—Ç–∞–±—ã –ø–æ–º–æ–≥–∞—é—Ç —Ç–æ–ª—å–∫–æ —ç–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –≤—Ö–æ–¥—è—â–∏–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è, –∞ –Ω–µ –∏–∑—É—á–∞—Ç—å –∏—Ö. –ò–∑ —ç—Ç–æ–≥–æ —Å–ª–µ–¥—É–µ—Ç, —á—Ç–æ –≤—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–æ–ª–∂–Ω—ã –ø—Ä–æ–≤–µ—Ä—è—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å–æ —Å—Ç–∞–±–∞–º–∏. –í—ã–∑–æ–≤ –æ—Ç SUT –∫ —Å—Ç–∞–±—É –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –∫–æ–Ω–µ—á–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–¥–∞–µ—Ç SUT. –¢–∞–∫–æ–π –≤—ã–∑–æ–≤ - —ç—Ç–æ –≤—Å–µ–≥–æ –ª–∏—à—å —Å—Ä–µ–¥—Å—Ç–≤–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–Ω–µ—á–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞; —ç—Ç–æ –¥–µ—Ç–∞–ª—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π —Å–æ —Å—Ç–∞–±–∞–º–∏ —è–≤–ª—è–µ—Ç—Å—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–º –∞–Ω—Ç–∏-–ø–∞—Ç—Ç–µ—Ä–Ω–æ–º, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Ö—Ä—É–ø–∫–∏–º —Ç–µ—Å—Ç–∞–º. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –∏–∑–±–µ–∂–∞—Ç—å —Ö—Ä—É–ø–∫–æ—Å—Ç–∏ —Ç–µ—Å—Ç–æ–≤ - —ç—Ç–æ –∑–∞—Å—Ç–∞–≤–∏—Ç—å —ç—Ç–∏ —Ç–µ—Å—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–æ–Ω–µ—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–∫–æ—Ç–æ—Ä—ã–π –≤ –∏–¥–µ–∞–ª–µ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –≤ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏, –∞ –Ω–µ –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞), –∞ –Ω–µ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.  

## –°–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤

–ö —Ç–µ—Å—Ç–∞–º –Ω—É–∂–Ω–æ –æ—Ç–Ω–æ—Å–∏—Ç—å—Å—è –∫–∞–∫ –∫ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º—É –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é: –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, –º—ã –¥–æ–ª–∂–Ω—ã –ø–æ–ª—É—á–∞—Ç—å —Ä–æ–≤–Ω–æ —Ç–æ—Ç –∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –¢–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã, –Ω–µ–ª—å–∑—è –æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞—Ç—å –≤—ã–∑–æ–≤ –Ω–µ–∫–æ—Ç–æ—Ä–æ–≥–æ —Ç–µ—Å—Ç–∞ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–º –≤—ã–∑–æ–≤–æ–º –∫–∞–∫–æ–≥–æ-—Ç–æ –¥—Ä—É–≥–æ–≥–æ —Ç–µ—Å—Ç–∞.
